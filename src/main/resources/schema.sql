--DROP TABLE IF EXISTS "FRIENDS";
--DROP TABLE IF EXISTS "FILMLIKES";
--DROP TABLE IF EXISTS "FILMGENRE";
--DROP TABLE IF EXISTS "FILM";
--DROP TABLE IF EXISTS "USERS";

CREATE TABLE IF NOT EXISTS "RATING"  (
  "ID" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "NAME" VARCHAR(10)
);

CREATE TABLE IF NOT EXISTS "GENRE"(
  "ID" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "DESCRIPTION" VARCHAR(200)
);

CREATE TABLE IF NOT EXISTS "USERS"(
  "ID" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "EMAIL" VARCHAR(30),
  "LOGIN" VARCHAR(20),
  "NAME" VARCHAR(50),
  "BIRTHDAY" DATE
);

CREATE TABLE IF NOT EXISTS "FILM"(
  "ID" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "NAME" VARCHAR(100),
  "DESCRIPTION" VARCHAR(200),
  "RELEASEDATE" DATE,
  "DURATION" INT,
  "RATING_ID" INT,
  FOREIGN KEY ("RATING_ID") REFERENCES "RATING" ("ID")
);

CREATE TABLE IF NOT EXISTS "FILMLIKES"(
  "FILM_ID" INT,
  "USER_ID" INT,
  PRIMARY KEY ("FILM_ID", "USER_ID"),
  FOREIGN KEY ("FILM_ID") REFERENCES "FILM" ("ID"),
  FOREIGN KEY ("USER_ID") REFERENCES "USERS" ("ID")
);

CREATE TABLE IF NOT EXISTS "FRIENDS"(
  "USER_ID" INT,
  "FRIEND_ID" INT,
  "CONFIRMED" BOOLEAN,
  PRIMARY KEY ("USER_ID", "FRIEND_ID"),
  FOREIGN KEY ("USER_ID") REFERENCES "USERS" ("ID"),
  FOREIGN KEY ("FRIEND_ID") REFERENCES "USERS" ("ID")
);

CREATE TABLE IF NOT EXISTS "FILMGENRE"(
  "FILM_ID" INT,
  "GENRE_ID" INT,
  PRIMARY KEY ("FILM_ID", "GENRE_ID"),
  FOREIGN KEY ("FILM_ID") REFERENCES "FILM" ("ID"),
  FOREIGN KEY ("GENRE_ID") REFERENCES "GENRE" ("ID")
);

